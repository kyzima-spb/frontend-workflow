{
    "env": "development",
    
    "paths": {
        "src": "./app/",
        "tmp": ".tmp/",
        "build": "./dist/"
    },
    
    "notify": {
        "error": {
            "title": "<%= error.name %>: <%= error.plugin %>",
            "message": "<%= error.message %>"
        }
    },
    
    "browserSync": {
        "notify": false,
        "server": {
            "baseDir": "@build"
        }
    },
    
    "watch": [
        {
            "src": "./bower.json",
            "tasks": ["wiredep"]
        },
        {
            "src": ["@src/**/*.styl"],
            "tasks": ["compile:css"]
        }
    ],
    
    "clean": {
        "patterns": [
            "**/*", "!.git*", "!.svn*"
        ],
        "options": {
            "cwd": "@build"
        }
    },
    
    "html": [
        {
            "entries": ["@src/index.html"],
            "dest": "@build",
            "vendor": {
                "inject": {
                    "relative": true
                }
            }
        },
        {
            "entries": ["@src/admin/admin.html"],
            "dest": "@build/admin",
            "vendor": {
                "group": "admin",
                "outputCss": "@build/vendor/css/admin.css",
                "outputJs": "@build/vendor/js/admin.js",
                "inject": {
                    "relative": true
                }
            }
        },
        {
            "entries": ["@src/test.html"],
            "dest": "@build",
            "vendor": {
                "group": "test"
            }
        }
    ],
    
    "htmlmin": {
        "options": {
            "useShortDoctype": true,
            "removeComments": true,
            "removeCommentsFromCDATA": true,
            "collapseWhitespace": true,
            "removeEmptyAttributes": true,
            "removeRedundantAttributes": true,
            "collapseBooleanAttributes": true,
            "removeScriptTypeAttributes": true,
            "removeStyleLinkTypeAttributes": true,
            "minifyJS": true,
            "minifyCSS": true
        }
    },
    
    "css": [
        {
            "src": ["@src/**/[^_]*.styl"],
            "dest": "@tmp",
            "stylus": {
                "include-css": true
            }
        }
    ],
    
    "browserify": [{
        "entries": "@src/js/index.js",
        "dest": "@tmp/js",
        "outputName": "index.js",
        "require": [],
        "external": []
    }],
    
    "images": {
        "src": "@src/img/**/*",
        "dest": "@build/img",
        "imagemin": {
            "progressive": true,
            "interlaced": true
        }
    },
    
    "fonts": {
        "src": "@src/fonts/**/*",
        "dest": "@build/fonts",
        "ext": "{eot,svg,ttf,woff,woff2}"
    }
}